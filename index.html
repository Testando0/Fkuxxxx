<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gerador Ultra Rápido</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-[#050505] text-white flex items-center justify-center min-h-screen p-4">
    <div class="max-w-md w-full bg-[#111] p-6 rounded-3xl border border-white/5">
        <h1 class="text-2xl font-black text-yellow-500 mb-6 text-center">TURBO GEN AI</h1>
        
        <textarea id="p" class="w-full bg-black p-4 rounded-2xl border border-white/10 outline-none focus:border-yellow-500" rows="3" placeholder="Prompt em inglês..."></textarea>
        
        <button id="b" class="w-full mt-4 bg-yellow-500 text-black font-bold py-4 rounded-2xl hover:bg-yellow-400 active:scale-95 transition-all">GERAR</button>

        <div id="ld" class="hidden mt-4 text-center text-sm text-gray-500 animate-pulse">Processando...</div>
        
        <div id="res" class="hidden mt-6">
            <img id="img" class="w-full rounded-2xl border border-white/10 shadow-2xl">
            <p class="text-[10px] text-gray-600 mt-2 text-center">Modelo: SDXL-Turbo (Hugging Face Router)</p>
        </div>

        <div id="debug" class="hidden mt-4 p-3 bg-red-900/20 text-red-400 text-[10px] rounded-lg border border-red-900/50 break-words"></div>
    </div>

    <script>
        const b = document.getElementById('b'), p = document.getElementById('p'), ld = document.getElementById('ld'), 
              res = document.getElementById('res'), img = document.getElementById('img'), db = document.getElementById('debug');

        b.onclick = async () => {
            if(!p.value) return;
            b.disabled = true; ld.classList.remove('hidden'); res.classList.add('hidden'); db.classList.add('hidden');

            try {
                const r = await fetch('/generate', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({ prompt: p.value })
                });

                if(!r.ok) {
                    const data = await r.json();
                    throw new Error(data.error || "Erro desconhecido");
                }

                const blob = await r.blob();
                img.src = URL.createObjectURL(blob);
                res.classList.remove('hidden');
            } catch (e) {
                db.innerText = "LOG DE ERRO: " + e.message;
                db.classList.remove('hidden');
            } finally {
                b.disabled = false; ld.classList.add('hidden');
            }
        };
    </script>
</body>
</html>
